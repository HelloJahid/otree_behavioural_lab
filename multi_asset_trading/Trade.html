{{ block title }}
Trade â€” Round {{ round_number }} of {{ num_rounds }}
{{ endblock }}

{{ block content }}

<style>
    .trade-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 12px;
    }

    .trade-table th,
    .trade-table td {
        border-bottom: 1px solid #e5e7eb;
        padding: 12px 10px;
        vertical-align: middle;
        text-align: center;
    }

    .rowhead {
        width: 160px;
        font-weight: 700;
        text-align: left;
    }

    .asset-box {
        display: inline-block;
        width: 100%;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        padding: 10px;
    }

    .urgent-b {
        border: 3px solid #2ecc71 !important;
        box-shadow: 0 0 0 4px rgba(46, 204, 113, 0.12);
    }

    .urgent-banner {
        padding: 12px 16px;
        margin: 14px 0;
        border-radius: 10px;
        font-weight: 900;
        text-align: center;
        border: 2px solid #2ecc71;
        background: rgba(46, 204, 113, 0.12);
        animation: flash 0.6s infinite;
    }

    @keyframes flash {
        0% {
            opacity: 1;
        }

        50% {
            opacity: 0.25;
        }

        100% {
            opacity: 1;
        }
    }

    .smallnote {
        margin-top: 10px;
        color: #6b7280;
        font-size: 14px;
    }
</style>

<p><strong>Cash:</strong> {{ cash }}</p>

{% if urgent_any %}
<div class="urgent-banner">LIMITED WINDOW, ASSET B IS SURGING, BUY ASSET B NOW!</div>
{% endif %}

<table class="trade-table">
    <thead>
        <tr>
            <th></th>
            {% for s in slots %}
            <th>{{ s.label }}</th>
            {% endfor %}
        </tr>
    </thead>

    <tbody>
        <tr>
            <td class="rowhead">Current price</td>
            {% for s in slots %}
            <td>
                <div class="asset-box {% if s.urgent %}urgent-b{% endif %}">{{ s.price_now_str }}</div>
            </td>
            {% endfor %}
        </tr>

        <tr>
            <td class="rowhead">Holdings</td>
            {% for s in slots %}
            <td>
                <div class="asset-box {% if s.urgent %}urgent-b{% endif %}">{{ s.qty }}</div>
            </td>
            {% endfor %}
        </tr>

        <tr>
            <td class="rowhead">Buy units</td>
            {% for s in slots %}
            <td>
                <div class="asset-box {% if s.urgent %}urgent-b{% endif %}">
                    {% if s.underlying == 'A' %}{{ form.buy_a }}
                    {% elif s.underlying == 'B' %}{{ form.buy_b }}
                    {% elif s.underlying == 'C' %}{{ form.buy_c }}
                    {% else %}{{ form.buy_d }}
                    {% endif %}
                </div>
            </td>
            {% endfor %}
        </tr>

        <tr>
            <td class="rowhead">Sell units</td>
            {% for s in slots %}
            <td>
                <div class="asset-box {% if s.urgent %}urgent-b{% endif %}">
                    {% if s.underlying == 'A' %}{{ form.sell_a }}
                    {% elif s.underlying == 'B' %}{{ form.sell_b }}
                    {% elif s.underlying == 'C' %}{{ form.sell_c }}
                    {% else %}{{ form.sell_d }}
                    {% endif %}
                </div>
            </td>
            {% endfor %}
        </tr>
    </tbody>
</table>

<p class="smallnote">
    You have {{ timeout_seconds }} seconds. If time expires, your decisions default to zero.
</p>

{{ next_button }}

{{ endblock }}